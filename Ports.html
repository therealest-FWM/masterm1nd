<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css">
<title>Unsecure Charging-Ports</title>
<link rel="icon" type="image/x-icon" href="assets/key-6312.png">
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">

<style>
  body, html {
    height: 100%;
    margin: 0;
    font-family: 'Orbitron', sans-serif;
    background: #000;
    color: #0F0;
    overflow: hidden;
  }

  /* ===== SPLIT LAYOUT ===== */
  .split-layout {
    display: flex;
    width: 100vw;
    height: 100vh;
  }

  .left-panel {
    width: 50%;
    position: relative;
    overflow: hidden;
    border-right: 2px solid rgba(57,255,20,0.3);
  }

  .right-panel {
    width: 50%;
    background: #000;
    display: none;
    position: relative;
  }

  .right-panel iframe {
    width: 100%;
    height: 100%;
    border: none;
    background: #000;
  }

  /* Neon divider glow */
  .left-panel::after {
    content: "";
    position: absolute;
    top: 0;
    right: 0;
    width: 2px;
    height: 100%;
    background: #39ff14;
    box-shadow: 0 0 20px #39ff14;
    opacity: 0.4;
  }

  /* ===== KEEP EXISTING STYLES ===== */
  .top-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 20px;
    background-color: #272727;
    color: #0F0;
  }

  .center-box {
    position: absolute;
    top: 53%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 70%;
    height: 30%;
    padding: 13%;
    border: 2px solid rgb(97, 107, 25);
    background: rgba(0,0,0,0.7);
    text-align: center;
    border-radius: 10px;
  }

  .input {
    width: 50%;
    padding: 10px;
    font-size: 18px;
    text-align: center;
  }

  button {
    margin: 5px;
  }

  .hint-box {
    position: absolute;
    top: 80px;
    right: -400px;
    width: 350px;
    background: #000;
    color: #0F0;
    padding: 20px;
    border: 2px solid #0f0;
    display: none;
  }
</style>
</head>

<body>

<div class="split-layout">

  <!-- ================= LEFT PANEL ================= -->
  <div class="left-panel">

    <div class="top-bar">
      <div class="logo">MASTERM1ND</div>
      <div class="lives-remaining">Lives Remaining: 2</div>
      <div class="control-buttons">
        <button class="timer">TIMER</button>
        <button onclick="Pause()">PAUSE</button>
        <button onclick="showHint()">HINT</button>
        <button onclick="quitToMainMenu()">QUIT</button>
      </div>
    </div>

    <div class="center-box">
      <h1 id="status">FILE STATUS:</h1>
      <h1 id="loc" style="color:red;">LOCKED</h1>
      <h1 id="icon">ðŸ”’</h1>

      <h1>ENTER KEY-CODE TO ACCESS</h1>
      <input type="text" class="input" id="passwordInput" placeholder="Type here">
      <h2 id="passwordResult"></h2>

      <button onclick="checkPassword()">Confirm</button>
      <button onclick="accessScreen()">Live Feed</button>
    </div>

    <div class="hint-box" id="hintBox">
      Access the live feed to find the keycode
    </div>

  </div>

  <!-- ================= RIGHT PANEL ================= -->
  <div class="right-panel" id="livePanel">
    <iframe
      src="https://itch.io/embed/2586313"
      allowfullscreen
      allow="fullscreen; autoplay">
    </iframe>
  </div>

</div>

<script>
/*****************************
 *  SOUND EFFECTS
 *****************************/
const SFX = {
  popup: new Audio("assets/correct-choice-43861-(popup).mp3"),
  wrong: new Audio("assets/error-mistake-sound-effect-incorrect-answer-437420-(wrong).mp3"),
  correct: new Audio("assets/success-48018-(right).mp3")
};

Object.values(SFX).forEach(s => s.volume = 0.6);

function playSFX(sound) {
  sound.currentTime = 0;
  sound.play().catch(()=>{});
}

/*****************************
 *  GAME STATE
 *****************************/
var livesRemaining = 2;

/*****************************
 *  PASSWORD CHECK
 *****************************/
function checkPassword() {
  const input = document.getElementById("passwordInput").value;
  const result = document.getElementById("passwordResult");

  if (input === "duckl1ng") {
    playSFX(SFX.correct);
    result.textContent = "Key-Code Valid. Access granted!";
    result.style.color = "green";

    document.getElementById("loc").textContent = "UNLOCKED";
    document.getElementById("loc").style.color = "green";
    document.getElementById("icon").textContent = "ðŸ”“";

    setTimeout(() => {
      window.location.href = "PortsRecap.html";
    }, 1500);

  } else {
    playSFX(SFX.wrong);
    result.textContent = "Key-Code Invalid. Access denied!";
    result.style.color = "red";

    livesRemaining--;
    document.querySelector(".lives-remaining").textContent =
      "Lives Remaining: " + livesRemaining;

    if (livesRemaining === 0) {
      window.location.href = "PortsGameOver.html";
    }
  }
}

/*****************************
 *  EMBED LIVE FEED
 *****************************/
function accessScreen() {
  playSFX(SFX.popup);
  document.getElementById("livePanel").style.display = "block";
}

/*****************************
 *  MISC
 *****************************/
function showHint() {
  const hint = document.getElementById("hintBox");
  hint.style.display = hint.style.display === "block" ? "none" : "block";
  hint.style.right = "10px";
}

function quitToMainMenu() {
  window.location.href = "LevelSelect.html";
}

document.addEventListener("keypress", e => {
  if (e.key === "Enter") checkPassword();
});
</script>

</body>
</html>

