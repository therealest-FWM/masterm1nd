<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Password Scenario 2</title>
  <link rel="icon" type="image/webp" href="assets/MMLogo.webp">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary-neon: #39ff14;
      --secondary-neon: #2adb11;
      --error-red: #ff4444;
      --glass-bg: rgba(0, 20, 0, 0.6);
      --glass-border: rgba(57, 255, 20, 0.4);
      --dark-bg: #0a0a0a;
      --active-blue: #00d4ff;
      --level-blue: #00f2ff;
    }

    * {
      box-sizing: border-box;
      user-select: none;
    }

    html,
    body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      background: var(--dark-bg);
      font-family: 'Orbitron', sans-serif;
      color: var(--primary-neon);
      overflow: hidden;
    }

    /* ============ TOP BAR ============ */
    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 6px 20px;
      background: linear-gradient(180deg, rgba(20, 20, 20, 0.95) 0%, rgba(10, 10, 10, 0.9) 100%);
      flex-wrap: nowrap;
      gap: 15px;
      z-index: 100;
      position: relative;
    }

    .top-bar .logo {
      font-weight: 900;
      font-size: clamp(16px, 2vw, 24px);
      text-shadow: 0 0 10px var(--primary-neon);
    }

    .top-bar .lives-remaining {
      flex-grow: 1;
      text-align: center;
      font-size: clamp(12px, 1.5vw, 18px);
    }

    .top-bar .control-buttons {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    .top-bar .control-buttons button {
      background: transparent;
      border: 1px solid var(--secondary-neon);
      color: var(--primary-neon);
      padding: 8px 16px;
      font-family: 'Orbitron', sans-serif;
      font-size: clamp(10px, 1.2vw, 14px);
      cursor: pointer;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .top-bar .control-buttons button:hover {
      background: var(--primary-neon);
      color: var(--dark-bg);
      box-shadow: 0 0 15px var(--primary-neon);
    }

    /* Progress Bar */
    .progress-container {
      display: flex;
      align-items: center;
      height: 24px;
      width: clamp(200px, 30vw, 400px);
      margin: 0 15px;
      border-radius: 4px;
      overflow: hidden;
      border: 1px solid var(--glass-border);
    }

    .progress-step {
      flex: 1;
      text-align: center;
      font-size: clamp(8px, 0.9vw, 12px);
      padding: 4px 2px;
      font-weight: 700;
      white-space: nowrap;
    }

    .step-1 {
      background: #25b043;
      color: #fff;
    }

    .step-2 {
      background: linear-gradient(to right, #1a2a6c, #b21f1f, #fdbb2d);
      background: var(--active-blue);
      color: #fff;
    }

    .step-3 {
      background: #222;
      color: #666;
    }

    /* Loader Animation - 3-piece triangular spinner */
    .loader {
      width: 28px;
      aspect-ratio: 1.154;
      position: relative;
      background: conic-gradient(from 120deg at 50% 64%, #0000, #25b043 1deg 120deg, #0000 121deg);
      animation: loader-main 1.5s infinite cubic-bezier(0.3, 1, 0, 1);
    }

    .loader::before,
    .loader::after {
      content: '';
      position: absolute;
      inset: 0;
      background: inherit;
      transform-origin: 50% 66%;
      animation: loader-piece 1.5s infinite;
    }

    .loader::after {
      --s: -1;
    }

    @keyframes loader-main {

      0%,
      30% {
        transform: rotate(0);
      }

      70% {
        transform: rotate(120deg);
      }

      70.01%,
      100% {
        transform: rotate(360deg);
      }
    }

    @keyframes loader-piece {
      0% {
        transform: rotate(calc(var(--s, 1) * 120deg)) translate(0);
      }

      30%,
      70% {
        transform: rotate(calc(var(--s, 1) * 120deg)) translate(calc(var(--s, 1) * -5px), 10px);
      }

      100% {
        transform: rotate(calc(var(--s, 1) * 120deg)) translate(0);
      }
    }

    /* ============ MAIN GAME AREA ============ */
    .game-container {
      position: relative;
      width: 100%;
      height: calc(100vh - 40px);
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
    }

    /* Fullscreen Video Background */
    .game-container video {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center 40%;
      z-index: 0;
      opacity: 0.9;
    }

    /* Dark overlay on video */
    .game-container::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.3);
      z-index: 1;
      pointer-events: none;
    }

    /* Content Area */
    .center-box {
      position: relative;
      z-index: 10;
      text-align: center;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 40px;
    }

    .profile svg {
      width: clamp(80px, 12vw, 120px);
      height: clamp(80px, 12vw, 120px);
      fill: var(--level-blue);
      filter: drop-shadow(0 0 15px var(--level-blue));
      margin-bottom: 30px;
    }

    .center-box h1 {
      font-size: clamp(18px, 3vw, 36px);
      font-weight: 700;
      margin: 15px 0;
      text-shadow: 0 0 15px var(--level-blue);
      color: #fff;
    }

    /* Input Field */
    .cyber-input {
      width: 80%;
      max-width: 500px;
      padding: 15px 25px;
      margin: 20px 0;
      background: rgba(255, 255, 255, 0.95);
      border: 3px solid var(--level-blue);
      border-radius: 30px;
      font-family: 'Orbitron', sans-serif;
      font-size: clamp(14px, 1.5vw, 20px);
      font-weight: 700;
      color: #1a237e;
      text-align: center;
      outline: none;
      transition: all 0.3s ease;
      box-shadow: 0 0 15px rgba(0, 242, 255, 0.2);
    }

    .cyber-input::placeholder {
      color: #555;
      text-transform: uppercase;
      font-weight: 500;
      transition: opacity 0.3s ease;
    }

    .cyber-input:focus {
      border-color: var(--primary-neon);
      box-shadow: 0 0 20px rgba(57, 255, 20, 0.3);
    }

    .cyber-input:focus::placeholder {
      opacity: 0.3;
    }

    /* Confirm Button - Blue */
    .cyber-btn {
      background: rgba(0, 10, 20, 0.6);
      border: 2px solid var(--level-blue);
      color: var(--level-blue);
      padding: 12px 40px;
      font-family: 'Orbitron', sans-serif;
      font-size: clamp(12px, 1.2vw, 18px);
      font-weight: 700;
      letter-spacing: 2px;
      cursor: pointer;
      text-transform: uppercase;
      transition: all 0.3s ease;
      clip-path: polygon(12px 0, 100% 0, 100% calc(100% - 12px), calc(100% - 12px) 100%, 0 100%, 0 12px);
      margin-top: 10px;
    }

    .cyber-btn:hover {
      background: var(--level-blue);
      color: var(--dark-bg);
      border-color: var(--level-blue);
      box-shadow: 0 0 20px var(--level-blue);
    }

    .cyber-btn:active {
      transform: scale(0.97);
    }

    /* Result Message */
    .result-message {
      font-size: clamp(16px, 2vw, 24px);
      font-weight: 700;
      margin-top: 20px;
      min-height: 30px;
    }

    .result-message.correct {
      color: var(--primary-neon);
      text-shadow: 0 0 10px var(--primary-neon), 0 0 20px var(--primary-neon), 0 0 40px var(--primary-neon);
      animation: pulse-glow 1s ease-in-out infinite alternate;
    }

    .result-message.incorrect {
      color: var(--error-red);
      text-shadow: 0 0 10px var(--error-red), 0 0 20px rgba(255, 68, 68, 0.5);
    }

    @keyframes pulse-glow {
      from {
        text-shadow: 0 0 10px var(--primary-neon), 0 0 20px var(--primary-neon);
      }

      to {
        text-shadow: 0 0 20px var(--primary-neon), 0 0 40px var(--primary-neon), 0 0 60px var(--primary-neon);
      }
    }

    /* ============ PAUSE MENU ============ */
    .pause-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.85);
      backdrop-filter: blur(5px);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    .pause-overlay.active {
      display: flex;
    }

    .pause-menu {
      background: var(--dark-bg);
      border: 2px solid var(--primary-neon);
      padding: 40px 60px;
      text-align: center;
      border-radius: 8px;
      box-shadow: 0 0 30px rgba(57, 255, 20, 0.3);
    }

    .pause-menu h1 {
      font-size: clamp(24px, 4vw, 48px);
      font-weight: 900;
      color: var(--primary-neon);
      text-shadow: 0 0 20px var(--primary-neon);
      margin-bottom: 30px;
      font-style: italic;
    }

    .pause-menu .cta {
      display: inline-flex;
      align-items: center;
      padding: 15px 40px;
      font-family: 'Orbitron', sans-serif;
      font-size: clamp(14px, 2vw, 20px);
      font-weight: 700;
      color: var(--dark-bg);
      background: var(--primary-neon);
      border: none;
      cursor: pointer;
      transition: all 0.3s ease;
      transform: skewX(-10deg);
      box-shadow: 4px 4px 0 #000;
    }

    .pause-menu .cta:hover {
      box-shadow: 8px 8px 0 #1a5f0c;
      transform: skewX(-10deg) scale(1.05);
    }

    .pause-menu .cta .span {
      transform: skewX(10deg);
    }

    .pause-menu .cta .second {
      margin-left: 20px;
      transform: skewX(10deg);
    }

    .pause-menu .cta .second svg {
      width: 30px;
      height: auto;
    }

    /* ============ HINT BOXES ============ */
    .hint-box,
    .left-hint-box {
      position: fixed;
      top: 80px;
      width: 380px;
      background: rgba(0, 0, 0, 0.9);
      border: 2px solid var(--primary-neon);
      color: var(--primary-neon);
      padding: 30px;
      border-radius: 8px;
      transition: all 0.4s ease;
      z-index: 500;
      font-size: 1.1rem;
      font-weight: 700;
      box-shadow: 0 0 30px rgba(57, 255, 20, 0.3);
      line-height: 1.5;
    }

    .hint-box {
      right: -450px;
    }

    .hint-box.visible {
      right: 20px;
    }

    .left-hint-box {
      left: -450px;
    }

    .left-hint-box.visible {
      left: 20px;
    }

    /* Music Toggle */
    .music-control {
      margin-top: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
      font-family: 'Orbitron', sans-serif;
      color: var(--primary-neon);
      background: rgba(0, 0, 0, 0.4);
      padding: 10px 20px;
      border-radius: 8px;
      border: 1px solid var(--glass-border);
    }

    .switch {
      position: relative;
      display: inline-block;
      width: 50px;
      height: 24px;
    }

    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #333;
      transition: .4s;
      border: 1px solid var(--primary-neon);
    }

    .slider:before {
      position: absolute;
      content: "";
      height: 16px;
      width: 16px;
      left: 4px;
      bottom: 3px;
      background-color: var(--primary-neon);
      transition: .4s;
      box-shadow: 0 0 10px var(--primary-neon);
    }

    input:checked+.slider {
      background-color: rgba(57, 255, 20, 0.2);
    }

    input:checked+.slider:before {
      transform: translateX(24px);
    }

    .slider.round {
      border-radius: 24px;
    }

    .slider.round:before {
      border-radius: 50%;
    }



    /* ============ RESPONSIVE ============ */
    @media (max-width: 768px) {
      .top-bar {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
      }

      .progress-container {
        width: 100%;
        margin: 10px 0;
      }

      .top-bar .control-buttons {
        width: 100%;
        justify-content: space-between;
      }

      .center-box {
        width: 95%;
        padding: 20px;
      }

      .cyber-input {
        width: 95%;
      }
    }
  </style>
</head>

<body>

  <div class="top-bar">
    <div class="logo">MASTERM1ND</div>
    <div class="progress-container">
      <div class="progress-step step-1">AMATEUR</div>
      <div class="progress-step step-2">INTERMEDIATE</div>
      <div class="progress-step step-3">WORLD CLASS</div>
    </div>
    <div class="loader"></div>
    <div class="lives-remaining">Lives Remaining: 5</div>
    <div class="control-buttons">
      <button class="timer">00:00:00</button>
      <button onclick="Pause()">PAUSE</button>
      <button onclick="showHint()">HINT</button>
      <button onclick="quitToMainMenu()">QUIT</button>
    </div>
  </div>

  <div class="game-container">
    <video autoplay loop muted playsinline>
      <source src="assets/Pass2BG.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>

    <div class="center-box">
      <div class="profile">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
          <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0" />
          <path fill-rule="evenodd"
            d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8m8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1" />
        </svg>
      </div>

      <h1>Welcome Back: Pr1nc3@KA05</h1>
      <h1>Please enter your password</h1>

      <input type="text" id="passwordInput" class="cyber-input" placeholder="Guess the password here">

      <br>
      <button class="cyber-btn" id="confirmbutton" onclick="checkPassword()">Confirm</button>

      <h2 class="result-message" id="resultMessage"></h2>
    </div>
  </div>

  <!-- Pause Menu Overlay -->
  <div class="pause-overlay" id="pause-overlay">
    <div class="pause-menu">
      <h1>Game Paused</h1>
      <button type="button" class="cta" onclick="resume()">
        <span class="span">Resume</span>
        <span class="second">
          <svg width="40px" height="20px" viewBox="0 0 66 43" xmlns="http://www.w3.org/2000/svg">
            <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
              <path
                d="M40.15,3.89 L43.97,0.14 C44.17,-0.05 44.48,-0.05 44.68,0.14 L65.69,20.78 C66.09,21.17 66.09,21.81 65.70,22.20 L44.68,42.86 C44.48,43.05 44.17,43.05 43.98,42.86 L40.15,39.11 C39.96,38.91 39.95,38.60 40.15,38.40 L56.99,21.86 C57.19,21.66 57.19,21.35 57.00,21.15 L40.15,4.61 C39.96,4.41 39.95,4.10 40.15,3.90 Z"
                fill="#000" />
              <path
                d="M20.15,3.89 L23.97,0.14 C24.17,-0.05 24.48,-0.05 24.68,0.14 L45.69,20.78 C46.09,21.17 46.09,21.81 45.70,22.20 L24.68,42.86 C24.48,43.05 24.17,43.05 23.98,42.86 L20.15,39.11 C19.96,38.91 19.95,38.60 20.15,38.40 L36.99,21.86 C37.19,21.66 37.19,21.35 37.00,21.15 L20.15,4.61 C19.96,4.41 19.95,4.10 20.15,3.90 Z"
                fill="#000" />
              <path
                d="M0.15,3.89 L3.97,0.14 C4.17,-0.05 4.48,-0.05 4.68,0.14 L25.69,20.78 C26.09,21.17 26.09,21.81 25.70,22.20 L4.68,42.86 C4.48,43.05 4.17,43.05 3.98,42.86 L0.15,39.11 C-0.04,38.91 -0.05,38.60 0.15,38.40 L16.99,21.86 C17.19,21.66 17.19,21.35 17.00,21.15 L0.15,4.61 C-0.04,4.41 -0.05,4.10 0.15,3.90 Z"
                fill="#000" />
            </g>
          </svg>
        </span>
      </button>

      <div class="music-control">
        <span>Stop Music</span>
        <label class="switch">
          <input type="checkbox" id="musicToggle" onchange="toggleMusic()">
          <span class="slider round"></span>
        </label>
      </div>
    </div>
  </div>
  </div>

  <!-- Hint Box (Right) -->
  <div class="hint-box" id="hintBox">
    The password consists of the user's birthday, including the month, day, and year. Look for the abbreviated form of
    the month, the ordinal version of the day (1st,2nd,3rd,etc), and the numeric version of the year, the password is
    made up of 10 characters and is alpha-numerical.
  </div>

  <!-- Hint Box (Left Auto) -->
  <div class="left-hint-box" id="leftHintBox">
    WHAT TO DO: Research the user's data to find the password pattern. Use the provided hints to construct the final
    key.
  </div>

  <script>
    /*****************************
     *  SOUND EFFECTS (SFX)
     *****************************/
    const SFX = {
      pause: new Audio("assets/pause-89443.mp3"),
      unpause: new Audio("assets/unpause-106278.mp3"),
      gameOver: new Audio("assets/error-beep-453357.mp3"),
      popup: new Audio("assets/correct-choice-43861-(popup).mp3"),
      wrong: new Audio("assets/error-mistake-sound-effect-incorrect-answer-437420-(wrong).mp3"),
      correct: new Audio("assets/awesome-level-up-351714.mp3"),
    };

    Object.values(SFX).forEach(s => {
      s.volume = 0.6;
      s.preload = "auto";
    });

    function playSFX(sound) {
      sound.currentTime = 0;
      sound.play().catch(() => { });
    }

    /*****************************
     *  BACKGROUND MUSIC (PER PAGE)
     *****************************/
    let bgMusic = null;

    if (localStorage.getItem("audioUnlocked") === "true") {
      bgMusic = new Audio("assets/BurnInSpace.mp3"); // Password L2 theme
      bgMusic.loop = true;
      bgMusic.volume = 0.2;
      bgMusic.preload = "auto";
      bgMusic.addEventListener("loadedmetadata", () => {
        bgMusic.currentTime = 22; // Default start time
        if (localStorage.getItem("isMuted") !== "true") {
          bgMusic.play().catch(() => { });
        }
      });
    }

    /*****************************
     *  GAME STATE
     *****************************/
    var livesRemaining = 5;
    var timer;
    var totalMilliseconds = 0;
    var totalTimeInSeconds;

    /*****************************
     *  TIMER
     *****************************/
    function formatTime(milliseconds) {
      var minutes = Math.floor(milliseconds / (60 * 1000));
      var seconds = Math.floor((milliseconds % (60 * 1000)) / 1000);
      var remainingMilliseconds = milliseconds % 1000;

      minutes = minutes < 10 ? "0" + minutes : minutes;
      seconds = seconds < 10 ? "0" + seconds : seconds;
      remainingMilliseconds = remainingMilliseconds < 100 ?
        (remainingMilliseconds < 10 ? "00" + remainingMilliseconds : "0" + remainingMilliseconds) : remainingMilliseconds;

      return minutes + ":" + seconds + ":" + remainingMilliseconds;
    }

    function startTimer() {
      timer = setInterval(function () {
        totalMilliseconds += 100;
        document.querySelector(".top-bar .timer").textContent = formatTime(totalMilliseconds);
      }, 100);
    }

    function stopTimer() {
      clearInterval(timer);
      totalTimeInSeconds = totalMilliseconds / 1000;
      localStorage.setItem("totalTimeInSeconds2", totalTimeInSeconds);
    }

    window.onload = function () {
      startTimer();
      showLeftHint();
    };

    /*****************************
     *  LEFT AUTO HINT
     *****************************/
    function showLeftHint() {
      playSFX(SFX.popup);
      const leftHint = document.getElementById("leftHintBox");
      leftHint.classList.add("visible");

      setTimeout(() => {
        leftHint.classList.remove("visible");
      }, 11000);
    }

    /*****************************
     *  HINT BUTTON
     *****************************/
    function showHint() {
      playSFX(SFX.popup);
      document.getElementById("hintBox").classList.toggle("visible");
    }

    /*****************************
     *  PASSWORD CHECK
     *****************************/
    function checkPassword() {
      var passwordInput = document.getElementById("passwordInput").value;
      var resultMessage = document.getElementById("resultMessage");
      var hintBox = document.getElementById("hintBox");

      if (passwordInput === "Jan3rd2005") {
        playSFX(SFX.correct);
        stopTimer();
        resultMessage.className = "result-message correct";
        resultMessage.textContent = "The password is correct";

        setTimeout(function () {
          window.location.href = "RecapPassL2.html";
        }, 1500);

      } else {
        if (livesRemaining <= 0) return;
        playSFX(SFX.wrong);
        livesRemaining--;
        resultMessage.className = "result-message incorrect";
        resultMessage.textContent = "The password is incorrect";

        document.querySelector(".top-bar .lives-remaining").textContent = "Lives Remaining: " + livesRemaining;

        if (livesRemaining === 3) {
          hintBox.textContent = "Remember that it follows the m/d/y and maybe it is capitalized";
          hintBox.classList.add("visible");
        }

        if (livesRemaining === 1) {
          hintBox.textContent = "It is similar to 2ndMar2002";
          hintBox.classList.add("visible");
        }

        if (livesRemaining === 0) {
          playSFX(SFX.gameOver);
          stopTimer();
          setTimeout(function () {
            window.location.href = "GameOverPassL2.html";
          }, 1200);
        }
      }
    }

    /*****************************
     *  PAUSE / RESUME
     *****************************/
    function toggleMusic() {
      const isStopped = document.getElementById("musicToggle").checked;
      localStorage.setItem("isMuted", isStopped);
      if (bgMusic) {
        if (isStopped) {
          bgMusic.pause();
        } else {
          // Only play if the game is NOT currently paused
          if (!document.getElementById("pause-overlay").classList.contains("active")) {
            bgMusic.play().catch(() => { });
          }
        }
      }
    }

    function Pause() {
      var overlay = document.getElementById("pause-overlay");
      if (!overlay.classList.contains("active")) {
        playSFX(SFX.pause);
        overlay.classList.add("active");
        stopTimer();
        if (bgMusic) bgMusic.pause();

        // Sync toggle
        document.getElementById("musicToggle").checked = localStorage.getItem("isMuted") === "true";
      } else {
        resume();
      }
    }

    function resume() {
      playSFX(SFX.unpause);
      document.getElementById("pause-overlay").classList.remove("active");
      startTimer();
      if (bgMusic && localStorage.getItem("isMuted") !== "true") {
        bgMusic.play().catch(() => { });
      }
    }

    /*****************************
     *  QUIT
     *****************************/
    function quitToMainMenu() {
      playSFX(SFX.popup);
      window.location.href = "LevelSelect.html";
    }

    /*****************************
     *  ENTER KEY SUPPORT
     *****************************/
    document.addEventListener("keydown", function (event) {
      if (event.key === "Enter") {
        checkPassword();
      }
    });

  </script>
</body>

</html>