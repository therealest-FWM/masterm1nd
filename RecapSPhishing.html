<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Level Recap</title>
  <link rel="icon" type="image/webp" href="assets/MMLogo.webp">
  <link rel="stylesheet" href="results.css">
  <script src="./Recap.js"></script>
</head>

<body>
  <div class="result-card success-theme">
    <h1>Spear Phishing Avoided!</h1>
    <h2>Level Recap</h2>

    <div class="stats-grid">
      <div class="stat-item">
        <span class="stat-value" id="time">--:--</span>
      </div>
      <div class="stat-item">
        <span class="stat-value score" id="score">★★★</span>
      </div>
    </div>

    <div class="lesson-box">
      <p id="lesson">Spear phishing is a type of phishing attack where the attacker is targeting you personally rather
        than targeting multiple people at once, it usually contains personal information. Outstanding achievement in
        completing the first phishing level though&#129395;! No matter the type of phishing attack you should never
        follow
        links if you don't know where they came from.&#129488;</p>
    </div>

    <div class="action-buttons">
      <button type="button" class="cyber-btn btn-green" id="retry" onclick="retry()">Retry</button>
      <button type="button" class="cyber-btn btn-green" id="continue" onclick="cont()">Continue</button>
      <button type="button" class="cyber-btn btn-green" onclick="quitToMainMenu()">Quit</button>
    </div>
  </div>

  <script>
    /*****************************
     *  BACKGROUND MUSIC (PER PAGE)
     *****************************/
    let bgMusic = null;

    if (localStorage.getItem("audioUnlocked") === "true") {
      bgMusic = new Audio("assets/Stars.mp3"); // Recap theme
      bgMusic.loop = true;
      bgMusic.volume = 0.05;
      bgMusic.preload = "auto";
      bgMusic.play().catch(() => { });
    }

    function retry() {
      // var retryBut = document.getElementById("retry"); // unused var removed
      window.location.href = 'SPhishing.html'
    }
    function cont() {
      window.location.href = 'SMSishing.html'
    }
    window.onload = function () {
      var y = document.getElementById("time");
      var totalTimeInSeconds4 = localStorage.getItem('totalTimeInSeconds4');
      var scoreDisplay = document.querySelector(".score");

      if (totalTimeInSeconds4 === null) {
        totalTimeInSeconds4 = 0;
      } else {
        totalTimeInSeconds4 = parseFloat(totalTimeInSeconds4);
      }

      if (y) {
        y.textContent = "Time: " + totalTimeInSeconds4.toFixed(1) + "s";
      }

      if (scoreDisplay) {
        if (totalTimeInSeconds4 <= 15) {
          scoreDisplay.textContent = "★★★";
        } else if (totalTimeInSeconds4 <= 30) {
          scoreDisplay.textContent = "★★☆";
        } else {
          scoreDisplay.textContent = "★☆☆";
        }
      }
    };
    /*****************************
    *  QUIT BUTTON
    *****************************/
    function quitToMainMenu() {
      window.location.href = "LevelSelect.html";
    }
  </script>
</body>

</html>